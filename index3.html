<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Classes</title>
    <!-- ajouter boostrap -->
  </head>
  <body>
    <div class="container-flui">
      <div class="panier">
        <table>
          <thead>
            <tr>
              <th>REF</th>
              <th>PRIX</th>
              <th>QTE</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <!-- <tr>
                   <td>val ref</td>
                   <td>val prix</td>
                   <td> val qte dans une zone de texte</td>
                   <td><button>Mettre Ã  jour</button></td>
               </tr> -->
          </tbody>
        </table>
        <button>Vider le panier</button>
      </div>
      <div class="boutique">
        <button>Ajouter dans le panier</button>
      </div>
    </div>
    <script>
      const panierInitial = [
        { ref: "prod_1", prix: 340.89, qte: 4 },
        { ref: "prod_2", prix: 44.89, qte: 7 },
        { ref: "prod_3", prix: 3.9, qte: 9 },
        { ref: "prod_4", prix: 77.69, qte: 14 },
        { ref: "prod_5", prix: 66.5, qte: 40 },
        { ref: "prod_6", prix: 77.89, qte: 3 },
      ];

      class Panier {
        constructor(items = []) {
          this.items = items;
        }
        add(ref, prix, qte = 1) {
          if (ref === undefined) return;
          if (prix === undefined) return;
          this.items.push(new Item(ref, prix, qte));
        }
        remove(ref) {
          const itemIndex = this.items.findIndex((item) => item.ref === ref);
          if (itemIndex >= 0) this.items.splice(itemIndex, 1);
        }
        list() {
          this.items.forEach((i) => console.log(i));
        }
        getItems() {
          return this.items;
        }

        sortByPrice() {
          this.items.sort(this.sf);
        }

        getTotal() {
          return this.items
            .map((i) => i.prix * i.qte)
            .reduce((acc, st) => (acc += st), 0);
        }
        sf(e1, e2) {
          return e2.prix - e1.prix;
        }
        clear() {
          this.items = [];
        }
      }
      class Item {
        constructor(r, p, q) {
          this.ref = r;
          this.prix = p;
          this.qte = q;
        }
      }

      var panier = new Panier(panierInitial);

      class View {
        //   constructor()
      }
    </script>
  </body>
</html>
